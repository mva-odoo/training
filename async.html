<html>
    <head>
        <script>
            let ajax = function (url) {
                return new Promise(function (resolve, reject) {
                    let req = new XMLHttpRequest()
                    req.open('GET', url, true)
                    req.onreadystatechange = function (aEvt) {
                    if (req.readyState == 4) {
                        if(req.status == 200)
                        resolve(req.responseText)
                        else
                        reject(req)
                    }
                    };
                    req.send(null)
                })
            }
            console.log('----------------->')
            // ajax('http://192.168.86.92:8090/first')
            // .then(function (response) {
            //     console.log('11111111111111')
            //     console.log(response)
            //     return ajax('http://192.168.86.92:8090/second')
            // })
            // .then(function (response) {
            //     console.log('22222222222222')
            //     console.log(response)
            // })
            // .catch(function (req) {
            // // Une des requête a échouée
            // })


            // Promise.all([
            //     ajax('http://192.168.86.92:8090/first'),
            //     ajax('http://192.168.86.92:8090/second')
            //     ]).then(function (responses) {
            //         console.log(responses);
            //     }).catch(function (errors) { })

            let asyncAjax = async function (url) {
                let response1 = await ajax('http://192.168.86.92:8090/first');
                console.log(JSON.parse(response1));
                let response = await ajax('http://192.168.86.92:8090/second');
                return JSON.parse(response)

            }

            asyncAjax().then(response => console.log(response));

            


        </script>
    </head>
    <body>

    </body>
</html>